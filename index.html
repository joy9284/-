<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>ä¸‹åˆèŒ¶è½‰ç›¤</title>
<style>
  body {
    font-family: "Arial", sans-serif;
    background: #FFF8F5;
    text-align: center;
    padding: 40px;
    color: #555;
  }
  #wheel {
    margin-top: 30px;
  }
  input, button {
    padding: 8px 12px;
    margin: 8px;
    border-radius: 8px;
    border: 1px solid #ddd;
    background: white;
  }
  button {
    cursor: pointer;
    background: #F5D0C5;
    border: none;
  }
</style>
</head>
<body>

<h2>ğŸ¥¤ ä¸‹åˆèŒ¶è½‰ç›¤ ğŸ¡</h2>

<input id="itemInput" placeholder="åŠ å…¥æ–°é¸é …">
<button onclick="addItem()">æ–°å¢</button>
<button onclick="resetItems()">æ¸…é™¤æ‰€æœ‰é¸é …</button>

<p>ç›®å‰é¸é …ï¼š</p>
<ul id="itemList"></ul>

<canvas id="wheel" width="400" height="400"></canvas><br>
<button onclick="spin()">è½‰ï¼</button>

<script>
let items = JSON.parse(localStorage.getItem("wheelItems")) || ["çå¥¶", "ç´…èŒ¶æ‹¿éµ"];
const listDOM = document.getElementById("itemList");
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

// ğŸŒˆ å¯æ„›ä½é£½å’Œè‰²ç³»
const pastelColors = [
  "#F7EDE2", // å¥¶æ²¹ç±³ç™½
  "#F5D0C5", // æ·¡ç²‰
  "#EAD7E8", // æ·¡ç´«
  "#D8E2DC", // è–„è·ç°ç¶ 
  "#FFE5EC", // ç²‰éœ§ç«ç‘°
  "#F6F5F2", // éœ§ç™½ç°
  "#E8E8F1"  // æ·¡è—ç°
];

function save() {
  localStorage.setItem("wheelItems", JSON.stringify(items));
}

function renderList() {
  listDOM.innerHTML = "";
  items.forEach((item, i) => {
    const li = document.createElement("li");
    li.textContent = item;
    listDOM.appendChild(li);
  });
}

function drawWheel() {
  const total = items.length;
  const angle = (2 * Math.PI) / total;

  for (let i = 0; i < total; i++) {
    ctx.beginPath();
    ctx.fillStyle = pastelColors[i % pastelColors.length];
    ctx.moveTo(200, 200);
    ctx.arc(200, 200, 200, i * angle, (i + 1) * angle);
    ctx.fill();

    // é¡¯ç¤ºæ–‡å­—
    ctx.save();
    ctx.translate(200, 200);
    ctx.rotate(i * angle + angle / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#555";
    ctx.font = "16px Arial";
    ctx.fillText(items[i], 180, 5);
    ctx.restore();
  }
}

function addItem() {
  const val = document.getElementById("itemInput").value.trim();
  if (!val) return;
  items.push(val);
  save();
  renderList();
  drawWheel();
  document.getElementById("itemInput").value = "";
}

function resetItems() {
  items = [];
  save();
  renderList();
  ctx.clearRect(0, 0, 400, 400);
}

function spin() {
  const rand = Math.random() * 360 + 2000;
  canvas.style.transition = "transform 4s ease-out";
  canvas.style.transform = `rotate(${rand}deg)`;
}

renderList();
drawWheel();
</script>

</body>
</html>
